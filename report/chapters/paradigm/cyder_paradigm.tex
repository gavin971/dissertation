\section{Cyder Repository Modeling Paradigm}

The Cyder repository model architecture is intended to modularly permit 
exchange of disposal system Component models (e.g., detailed nuclide transport 
model vs. less detailed) and data (e.g., exchange clay for granite geologic 
data) and accept arbitrary waste stream isotopic compositions.  
Finally, in order to participate in the simulation as a facility model, must 
make requests for spent material up to its capacity. Determination of the 
repository capacity for various types of spent fuel commodities comprises the 
interfacing functionality of the repository model.

\subsection{Waste Stream Conditioning}

Waste conditioning is the process of packing a waste stream into an appropriate 
waste form. As \Cyclus lacks a conditioning facility, the Cyder repository 
fulfills this need as a part of the repository behavior. As a waste stream is 
accepted into the repository, it is associated with a waste form according 
to its commodity name. This pairing is input by the user during simulation 
setup when a number of waste form Component configurations are specified and 
associated with allowed waste stream commodities. It is according to these 
pairings that Cyder model loads discrete waste formss with discrete waste 
stream contaminant vectors as depicted in Figure \ref{fig:ws_conditioning}.

\begin{figure}[htbp!]
\begin{center}
\def\svgwidth{.5\textwidth}
\input{./chapters/paradigm/ws_conditioning.eps_tex}
\end{center}
\caption{Waste streams are conditioned with the appropriate waste form 
according to user-specified pairings.}
\label{fig:ws_conditioning}
\end{figure}

\subsection{Waste Form Packaging}

Waste packaging is the process of placing one or many waste forms into a 
(typically metallic) containment package. Once the waste stream has been 
conditioned into a waste form, that waste form Component is loaded into a waste 
package Component, also according to allowed pairs dictated by the user, as 
depicted in Figure \ref{fig:wf_packaging}.

\begin{figure}[htbp!]
\begin{center}
\def\svgwidth{.5\textwidth}
\input{./chapters/paradigm/wf_packaging.eps_tex}
\end{center}
\caption{Waste forms are loaded into the appropriate waste package 
according to user-specified pairings.}
\label{fig:wf_packaging}
\end{figure}


\subsection{Package Placement}

Finally, the waste package is emplaced in a buffer component, which 
contains many other waste packages, spaced evenly in a grid. The grid is 
defined by the user input and depends on repository depth, $\Delta z$, waste 
package spacing, $\Delta x$, and tunnel spacing, $\Delta y$ as in Figure 
\ref{fig:repo_layout}.

\begin{figure}[htbp!]
\begin{center}
\def\svgwidth{.5\textwidth}
\input{./chapters/paradigm/repo_layout.eps_tex}
\end{center}
\caption{The repository layout has a depth and a uniform package spacing.}
\label{fig:repo_layout}
\end{figure}

\subsection{Nested Components}

The fundamental unit of information in the repository model is radionuclide 
contaminant presence at each stage of containment.  The repository model, in 
this way, is fundamentally a tool to determine thermal and contaminant 
transport evolution as a result of an arbitrary waste stream. The repository 
model in this work conducts this calculation by  treating each containment 
Component as nested volumes in a release chain. 

\subsection{Geometry}

Each Component of the repository system (i.e. waste form, waste package, buffer, 
and geologic medium) is modeled as a discrete control volume. Each control 
volume performs its own mass balance at each time step and assesses its own 
internal  heat transfer and degradation phenomena separately from the other 
nested Components.

\subsection{Material Data}

Each Component of the repository system posesses a notion of the material that 
it is made of. Supporting thermal and hydrologic data for canonical engineered 
barrier and geologic media is provided with the code in an SQLite database. 

\subsection{Thermal Transport Model}

Each contaminant posesses a thermal transport model that determines the 
temperature inside the Component over time. 

\subsection{Nuclide Transport Model}

Each contaminant posesses a radionuclide contaminant transport model that determines the 
contaminant transport inside the Component over time. 

\subsection{Implicit Timestepping}

Each Component passes some information radially outward to the nested 
Component immediately containing it and some information radially 
inward to the nested Component it contains. 


In the case of radionuclide transport, for example, each Component model
requires information about the radionuclides released from the Component it
immediately contains.  Thus, nuclide release information is passed radially
outward from the waste stream sequentially through each containment layer to
the geosphere. However, the solutions within each Component often rely on the
external boundary conditions of that Component.  Thus, the Cyder model uses an
implicit timestepping method to arrive at the future state of each Component,
radially outward, as a function of both the past state and the current state. 

That is, in Component 0, the innermost Component in a nested series, the mass or concentration 
distribution in the Component at time $t_n$ is found from the inner boundary 
condition at time $t_n$ and the outer boundary condition at $t_{n-1}$. Then, from 
the resulting mass or concentration distribution, I can solve, numerically, for 
the outer boundary condition at $t_n$ which can, in turn, be used by the parent 
component 1 as the $t_n$ inner boundary condition of its own solution. For each timestep :

\begin{align}
  BC(i, r_o, c_1, t_n) &= f( BC(i, r_i, c_0, t_n), BC(i, r_o, c_1, t_{n-1}) )
  \intertext{where}
  BC  &= \mbox{boundary condition }\nonumber\\
  i &= \mbox{the isotope }\nonumber\\
  r_i &= \mbox{the inner boundary radius } [m]\nonumber\\
  r_o &= \mbox{the outer boundary radius } [m]\nonumber\\
  c_0 &= \mbox{the innermost Component}\nonumber\\
  c_1 &= \mbox{the Component that contains c}_0\nonumber\\
  f &= \mbox{functional form of the contaminant transport algorithm}\nonumber\\
  t_n &= \mbox{timestep n.}\nonumber
\end{align}



\subsection{Waste Stream}

The repository model must accept arbitrary spent fuel and high level waste 
streams. A waste stream is a material data object resulting from the \Cyclus simulated 
fuel cycle. It arrives at the repository and is emplaced if it obeys all repository capacity 
limits. As radionuclides are gained, lost, and 
transmuted within the spent fuel object, a history of its isotopic composition 
is recorded.

For waste streams that vary from each other in composition, the thermal 
capacity of the repository to recieve that waste stream must therefore be recalculated. 
One way to model this will be to recalculate the appropriate lengthwise spacing 
of waste packages when the heat generation rate of a new package is 
significantly different than other waste packages in the repository. 


Since disposable material in most simulations of interest will be of variable 
composition and therefore heterogeneous in heat production capability, the 
repository model will repeatedly need to recalculate its own capacity as 
new materials are offered.

\subsection{Waste Form}
Though the Waste Form Component can be modeled by any of the available 
NuclideModels, the Degradation Rate based or Mixed Cell radionuclide transport 
models are preferred for modeling of the Waste Form Component.  This is 
because, in repository performance asessments, waste form dissolution is 
typically modeled as instantaneous or rate based. Dissolution related release 
is historically modeled as congruent, solubility limited, or both, with some 
radionuclides becoming immediately accessible, and some tending to remain in 
the fuel matrix. 

\subsection{Waste Package}
Though the Waste Package Component can be modeled by any of the available 
NuclideModels, the simple Degradation Rate based model is strongly preferred.
Waste package time to failure is dependent on water contact and heat, 
but is historically modeled probabilistically, or at a constant rate.
Accordingly, waste package degradation in repository performance is either 
neglected entirely, instantaneous and complete (a delay before full release), 
or partial and constant (a constantly present hole in the package). 


\subsection{Buffer}
Diffusion is the primary mechanism for nuclide transport through the 
buffer Component of the repository system. While the buffer may degrade, the 
near field has historically been modeled in as much hydrologic detail as 
possible. For this reason, the Lumped Parameter or One Dimensional Permeable 
Porous Medium nuclide transport models are preferred.

\subsection{Geologic Environment}
In most of the saturated, low permeability environments being considered, 
diffusion is the primary mechanism for nuclide transport through the geologic 
medium Component of the repository system. While the near field may degrade, 
the far field should be modeled in detail if possible. For this reason, the 
One Dimensional Permeable Porous Medium nuclide transport 
model is preferred.

